"use strict";(self.webpackChunkidentity=self.webpackChunkidentity||[]).push([[484],{8289:function(n,e,t){t.r(e),t.d(e,{default:function(){return v},useStore:function(){return P}});var r=t(9742),i=t(2798),u=t(9548),a=t(6969),o=t.n(a),c=function(n){return n.data};console.log("__Process","http://192.168.2.103:5046"),o().defaults.baseURL="http://192.168.2.103:5046",o().interceptors.request.use((function(n){var e=window.localStorage.getItem("token");return e&&n.headers&&(n.headers.Authorization="Bearer ".concat(e)),n}));var s=function(n){return o().get(n).then(c)},f=function(n,e){return o().post(n,e).then(c)},d=function(n,e){return o().put(n,e).then(c)},l=function(n){return o().delete(n).then(c)},m={AquariumCall:{list:function(){return s("/api/aquarium")},create:function(n){return f("/api/aquarium",n)},read:function(n){return s("/api/aquarium/".concat(n))},update:function(n){return d("/api/aquarium/".concat(n.id),n)},delete:function(n){return l("/api/aquarium/".concat(n))}},AccountCall:{current:function(){return s("/api/account")},login:function(n){return f("/api/account/login",n)},register:function(n){return f("/api/account/register",n)}},DuengungCall:{list:function(){return s("/api/duengung")},create:function(n){return f("/api/duengung",n)},update:function(n){return d("/api/duengung/".concat(n.id),n)},delete:function(n){return l("/api/duengung/".concat(n))}},FeedCall:{list:function(n,e){return s("/api/feed/grouped?page=".concat(n,"&days=").concat(e))}},FischCall:{list:function(){return s("/api/fisch")},create:function(n){return f("/api/fisch",n)},read:function(n){return s("/api/fisch/".concat(n))},update:function(n){return d("/api/fisch/".concat(n.id),n)},delete:function(n){return l("/api/fisch/".concat(n))}},KoralleCall:{list:function(){return s("/api/koralle")},create:function(n){return f("/api/koralle",n)},read:function(n){return s("/api/koralle/".concat(n))},update:function(n){return d("/api/koralle/".concat(n.id),n)},delete:function(n){return l("/api/koralle/".concat(n))}},MessungCall:{list:function(){return s("/api/messung")},create:function(n){return f("/api/messung",n)},update:function(n){return d("/api/messung/".concat(n.id),n)},delete:function(n){return l("/api/messung/".concat(n))}},NotizCall:{list:function(){return s("/api/notiz")},create:function(n){return f("/api/notiz",n)},read:function(n){return s("/api/notiz/".concat(n))},update:function(n){return d("/api/notiz/".concat(n.id),n)},delete:function(n){return l("/api/notiz/".concat(n))}}},p=t(9912),g=t(1996),h=function(n,e,t,r){return new(t||(t=Promise))((function(i,u){function a(n){try{c(r.next(n))}catch(e){u(e)}}function o(n){try{c(r.throw(n))}catch(e){u(e)}}function c(n){var e;n.done?i(n.value):(e=n.value,e instanceof t?e:new t((function(n){n(e)}))).then(a,o)}c((r=r.apply(n,e||[])).next())}))},v=m,k={name:"fishbook-storage",getStorage:function(){return localStorage}},Z={feedItemType:"",showModal:!1,pageSize:7,currentPage:1,aquarien:[],displayName:null,feed:{total:0,groupedFeeds:[]},redirectUrl:null,timers:[],token:null,user:null},w=Object.assign({},Z),P=(0,u.ZP)()((0,p.mW)((0,p.tJ)((function(n,e){return Object.assign(Object.assign({},w),{addAquarium:function(e){return n((0,g.ZP)((function(n){n.aquarien=[].concat((0,i.Z)(n.aquarien),[e])})),!1,"addAquarium")},addFeedItem:function(e){return n((0,g.ZP)((function(n){n.showModal=!0,n.feedItemType=e})),!1,"addFeedItem")},addTimer:function(e){return n((0,g.ZP)((function(n){n.timers.find((function(n){return n.name===e.name}))?alert("Timer '".concat(e.name,"' schon vorhanden")):n.timers=[].concat((0,i.Z)(n.timers),[e]).sort((function(n,e){return n.current>e.current?1:n.current===e.current?0:-1}))})),!1,"addTimer")},closeModal:function(){n((0,g.ZP)((function(n){n.showModal=!1})),!1,"closeModal")},fetchAquarien:function(){return h(void 0,void 0,void 0,(0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.AquariumCall.list();case 2:t=e.sent,n((0,g.ZP)((function(n){n.aquarien=t})),!1,"fetchAquarien");case 4:case"end":return e.stop()}}),e)})))},fetchFeed:function(t,i){return h(void 0,void 0,void 0,(0,r.Z)().mark((function u(){var a,o,c;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=null!==t&&void 0!==t?t:e().currentPage,o=null!==i&&void 0!==i?i:e().pageSize,r.next=4,m.FeedCall.list(a,o);case 4:c=r.sent,n((0,g.ZP)((function(n){n.feed=c,n.currentPage=a,n.pageSize=o})),!1,"fetchFeed");case 6:case"end":return r.stop()}}),u)})))},incrementSecond:function(e){n((0,g.ZP)((function(n){var t=n.timers.find((function(n){return n.name===e.name}));t.current-=1,t.current<=0&&(t.ringActive=!0,t.active=!1,t.current=0)})),!1,"incrementSecond")},logout:function(){window.localStorage.removeItem("token"),window.sessionStorage.removeItem("fishbook-storage"),n((0,g.ZP)((function(n){n.aquarien=Z.aquarien,n.token=Z.token,n.feed=Z.feed,n.timers=Z.timers,n.user=Z.user,n.displayName=Z.displayName,n.redirectUrl="/"})),!1,"logout")},pauseTimer:function(e){n((0,g.ZP)((function(n){n.timers.find((function(n){return n.name===e.name})).active=!1})),!1,"pauseTimer")},removeTimer:function(e){n((0,g.ZP)((function(n){n.timers=(0,i.Z)(n.timers.filter((function(n){return n.name!==e.name})))})),!1,"removeTimer")},setRedirectUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n((0,g.ZP)((function(n){n.redirectUrl=e})),!1,"setRedirectUrl")},setTime:function(e){n((0,g.ZP)((function(n){var t=n.timers.find((function(n){return n.name===e.timer.name}));t.current=e.seconds,t.seconds=e.seconds})),!1,"setTime")},setToken:function(e){window.localStorage.setItem("token",e),n((0,g.ZP)((function(n){n.token=e})),!1,"setToken")},setUser:function(e){window.localStorage.setItem("token",e.token),n((0,g.ZP)((function(n){n.user=e,n.token=e.token,n.displayName=e.displayName})),!1,"setUser")},startTimer:function(e){n((0,g.ZP)((function(n){var t=n.timers.find((function(n){return n.name===e.name}));t.active=!0,t.ringActive=!1})),!1,"startTimer")}})}),k),{enabled:!0,anonymousActionType:"unbekannt",name:"Fishbook"}))}}]);
//# sourceMappingURL=484.2068681d.chunk.js.map