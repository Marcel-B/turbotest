"use strict";(self.webpackChunkidentity=self.webpackChunkidentity||[]).push([[374],{7313:function(n,e,t){t.r(e),t.d(e,{useStore:function(){return m}});var r=t(9742),i=t(2798),u=t(9548),a=t(3671),o=t(9912),c=t(1996),s=function(n,e,t,r){return new(t||(t=Promise))((function(i,u){function a(n){try{c(r.next(n))}catch(e){u(e)}}function o(n){try{c(r.throw(n))}catch(e){u(e)}}function c(n){var e;n.done?i(n.value):(e=n.value,e instanceof t?e:new t((function(n){n(e)}))).then(a,o)}c((r=r.apply(n,e||[])).next())}))};e.default=a.Z;var f={name:"fishbook-storage",getStorage:function(){return localStorage}},d={feedItemType:"",showModal:!1,pageSize:7,currentPage:1,aquarien:[],displayName:null,feed:{total:0,groupedFeeds:[]},redirectUrl:null,timers:[],token:null,user:null},l=Object.assign({},d),m=(0,u.ZP)()((0,o.mW)((0,o.tJ)((function(n,e){return Object.assign(Object.assign({},l),{addAquarium:function(e){return n((0,c.ZP)((function(n){n.aquarien=[].concat((0,i.Z)(n.aquarien),[e])})),!1,"addAquarium")},addFeedItem:function(e){return n((0,c.ZP)((function(n){n.showModal=!0,n.feedItemType=e})),!1,"addFeedItem")},addTimer:function(e){return n((0,c.ZP)((function(n){n.timers.find((function(n){return n.name===e.name}))?alert("Timer '".concat(e.name,"' schon vorhanden")):n.timers=[].concat((0,i.Z)(n.timers),[e]).sort((function(n,e){return n.current>e.current?1:n.current===e.current?0:-1}))})),!1,"addTimer")},closeModal:function(){n((0,c.ZP)((function(n){n.showModal=!1})),!1,"closeModal")},fetchAquarien:function(){return s(void 0,void 0,void 0,(0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Z.AquariumCall.list();case 2:t=e.sent,n((0,c.ZP)((function(n){n.aquarien=t})),!1,"fetchAquarien");case 4:case"end":return e.stop()}}),e)})))},fetchFeed:function(t,i){return s(void 0,void 0,void 0,(0,r.Z)().mark((function u(){var o,s,f;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=null!==t&&void 0!==t?t:e().currentPage,s=null!==i&&void 0!==i?i:e().pageSize,r.next=4,a.Z.FeedCall.list(o,s);case 4:f=r.sent,n((0,c.ZP)((function(n){n.feed=f,n.currentPage=o,n.pageSize=s})),!1,"fetchFeed");case 6:case"end":return r.stop()}}),u)})))},incrementSecond:function(e){n((0,c.ZP)((function(n){var t=n.timers.find((function(n){return n.name===e.name}));t.current-=1,t.current<=0&&(t.ringActive=!0,t.active=!1,t.current=0)})),!1,"incrementSecond")},logout:function(){window.localStorage.removeItem("token"),window.sessionStorage.removeItem("fishbook-storage"),n((0,c.ZP)((function(n){n.aquarien=d.aquarien,n.token=d.token,n.feed=d.feed,n.timers=d.timers,n.user=d.user,n.displayName=d.displayName,n.redirectUrl="/"})),!1,"logout")},pauseTimer:function(e){n((0,c.ZP)((function(n){n.timers.find((function(n){return n.name===e.name})).active=!1})),!1,"pauseTimer")},removeTimer:function(e){n((0,c.ZP)((function(n){n.timers=(0,i.Z)(n.timers.filter((function(n){return n.name!==e.name})))})),!1,"removeTimer")},setRedirectUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n((0,c.ZP)((function(n){n.redirectUrl=e})),!1,"setRedirectUrl")},setTime:function(e){n((0,c.ZP)((function(n){var t=n.timers.find((function(n){return n.name===e.timer.name}));t.current=e.seconds,t.seconds=e.seconds})),!1,"setTime")},setToken:function(e){window.localStorage.setItem("token",e),n((0,c.ZP)((function(n){n.token=e})),!1,"setToken")},setUser:function(e){window.localStorage.setItem("token",e.token),n((0,c.ZP)((function(n){n.user=e,n.token=e.token,n.displayName=e.displayName})),!1,"setUser")},startTimer:function(e){n((0,c.ZP)((function(n){var t=n.timers.find((function(n){return n.name===e.name}));t.active=!0,t.ringActive=!1})),!1,"startTimer")}})}),f),{enabled:!0,anonymousActionType:"unbekannt",name:"Fishbook"}))},3671:function(n,e,t){var r=t(6969),i=t.n(r),u=function(n){return n.data};console.log("__Process","http://192.168.2.103:5046"),i().defaults.baseURL="http://192.168.2.103:5046",i().interceptors.request.use((function(n){var e=window.localStorage.getItem("token");return e&&n.headers&&(n.headers.Authorization="Bearer ".concat(e)),n}));var a=function(n){return i().get(n).then(u)},o=function(n,e){return i().post(n,e).then(u)},c=function(n,e){return i().put(n,e).then(u)},s=function(n){return i().delete(n).then(u)},f={AquariumCall:{list:function(){return a("/api/aquarium")},create:function(n){return o("/api/aquarium",n)},read:function(n){return a("/api/aquarium/".concat(n))},update:function(n){return c("/api/aquarium/".concat(n.id),n)},delete:function(n){return s("/api/aquarium/".concat(n))}},AccountCall:{current:function(){return a("/api/account")},login:function(n){return o("/api/account/login",n)},register:function(n){return o("/api/account/register",n)}},DuengungCall:{list:function(){return a("/api/duengung")},create:function(n){return o("/api/duengung",n)},update:function(n){return c("/api/duengung/".concat(n.id),n)},delete:function(n){return s("/api/duengung/".concat(n))}},FeedCall:{list:function(n,e){return a("/api/feed/grouped?page=".concat(n,"&days=").concat(e))}},FischCall:{list:function(){return a("/api/fisch")},create:function(n){return o("/api/fisch",n)},read:function(n){return a("/api/fisch/".concat(n))},update:function(n){return c("/api/fisch/".concat(n.id),n)},delete:function(n){return s("/api/fisch/".concat(n))}},KoralleCall:{list:function(){return a("/api/koralle")},create:function(n){return o("/api/koralle",n)},read:function(n){return a("/api/koralle/".concat(n))},update:function(n){return c("/api/koralle/".concat(n.id),n)},delete:function(n){return s("/api/koralle/".concat(n))}},MessungCall:{list:function(){return a("/api/messung")},create:function(n){return o("/api/messung",n)},update:function(n){return c("/api/messung/".concat(n.id),n)},delete:function(n){return s("/api/messung/".concat(n))}},NotizCall:{list:function(){return a("/api/notiz")},create:function(n){return o("/api/notiz",n)},read:function(n){return a("/api/notiz/".concat(n))},update:function(n){return c("/api/notiz/".concat(n.id),n)},delete:function(n){return s("/api/notiz/".concat(n))}}};e.Z=f}}]);
//# sourceMappingURL=374.48ccb2bb.chunk.js.map