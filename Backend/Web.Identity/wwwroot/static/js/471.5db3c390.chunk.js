"use strict";(self.webpackChunkidentity=self.webpackChunkidentity||[]).push([[471],{3065:function(e,t,n){n.r(t);var r=n(9742),i=n(6610),s=n(3298),o=n(8641),a=n(3689),l=n(8871),c=n.n(l),d=n(8655),u=n(8948),f=n(6037),h=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(t){s(t)}}function a(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))},p=s.object({email:s.string().email("email Format").required("ben\xf6tigt"),password:s.string().required("ben\xf6tigt")}).required();t.default=function(e){var t,n,s=e.redirectUrl,m=(0,l.useStore)(),g=m.setRedirectUrl,x=m.setUser,b=(0,u.useForm)({resolver:(0,f.X)(p)}),j=b.formState.errors,v=b.handleSubmit,w=b.register;(0,d.useEffect)((function(){var e=new a.UserManager({authority:"http://localhost:6065",client_id:"fishbook.js.client",redirect_uri:"http://localhost:3000/callback",response_type:"code",scope:"openid profile fishbook-feed",post_logout_redirect_uri:"http://localhost:3000/"});e.getUser().then((function(t){t?console.log("User logged in",t.profile):(console.log("User not logged in"),e.signinRedirect().catch((function(e){return console.error(e)})))}))}),[]);return(0,i.jsxs)(o.Box,{children:[(0,i.jsx)(o.Typography,Object.assign({variant:"h4"},{children:"Anmelden"})),(0,i.jsx)(o.Divider,{orientation:"horizontal",sx:{mb:2}}),(0,i.jsx)("form",Object.assign({onSubmit:v((function(e){return h(void 0,void 0,void 0,(0,r.Z)().mark((function t(){var n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=6;break}return t.next=3,c().AccountCall.login(e);case 3:n=t.sent,x(n),g(s);case 6:case"end":return t.stop()}}),t)})))}))},{children:(0,i.jsxs)(o.Grid,Object.assign({container:!0,spacing:2,sx:{justifyContent:"flex-end"}},{children:[(0,i.jsx)(o.Grid,Object.assign({item:!0,md:6,xs:12},{children:(0,i.jsx)(o.TextField,Object.assign({label:"Email",type:"text",autoComplete:"username",defaultValue:"",error:!!j.email},w("email"),{helperText:null===(t=j.email)||void 0===t?void 0:t.message,fullWidth:!0,name:"email"}))})),(0,i.jsx)(o.Grid,Object.assign({item:!0,md:6,xs:12},{children:(0,i.jsx)(o.TextField,Object.assign({label:"Passwort",type:"password",autoComplete:"current-password",error:!!j.password,fullWidth:!0},w("password"),{helperText:null===(n=j.password)||void 0===n?void 0:n.message,defaultValue:"",name:"password"}))})),(0,i.jsx)(o.Grid,Object.assign({item:!0},{children:(0,i.jsx)(o.Button,Object.assign({type:"submit"},{children:"Login"}))}))]}))}))]})}}}]);
//# sourceMappingURL=471.5db3c390.chunk.js.map